<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡πâ‡∏≤‡∏¢‡∏ö‡∏ó: Python & Algorithms</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans Thai', sans-serif; }
    .option-btn:hover { transform: translateY(-2px); }
    .fade-in { animation: fadeIn 0.3s ease-in-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body class="bg-blue-50 flex flex-col min-h-screen">

<!-- ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö -->
<header class="bg-white shadow-md w-full sticky top-0 z-10">
  <div class="container mx-auto px-6 py-4 flex justify-between items-center">
    <div>
      <h2 class="text-lg font-semibold text-gray-600">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà 2: Python</h2>
      <h1 class="text-2xl font-bold text-blue-800">üìù ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡πâ‡∏≤‡∏¢‡∏ö‡∏ó (Final Exam)</h1>
    </div>
    <a href="index.html" class="text-gray-500 hover:text-blue-600 transition-colors flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" /></svg>
      ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
    </a>
  </div>
</header>

<!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å -->
<main class="flex-1 container mx-auto px-4 py-8 md:px-8 flex flex-col md:flex-row gap-8 items-start max-w-6xl">

  <!-- ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ã‡πâ‡∏≤‡∏¢: ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
  <div class="w-full md:w-1/3 flex flex-col items-center md:items-start sticky top-24">
    <!-- ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π -->
    <div class="bg-white p-6 rounded-2xl shadow-lg border border-blue-100 w-full flex flex-col items-center text-center relative overflow-hidden">
      <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-400 to-purple-500"></div>

      <!-- ‡∏£‡∏π‡∏õ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π -->
      <img src="https://i.ibb.co/vvmFnzs5/2.png" alt="‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π" class="w-28 h-28 rounded-full border-4 border-white shadow-md mb-4 bg-blue-50 object-cover">

      <h3 class="text-xl font-bold text-gray-800">‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π‡πÉ‡∏à‡∏î‡∏µ</h3>
      <p class="text-sm text-gray-500 mb-4">‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ‡∏°.2</p>

      <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏û‡∏π‡∏î (Teacher Bubble) -->
      <div class="relative bg-blue-50 p-4 rounded-xl text-sm text-gray-700 w-full">
        <div class="absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-blue-50 rotate-45"></div>
        <p id="teacher-msg">‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏ï‡∏¥‡πÉ‡∏´‡πâ‡∏î‡∏µ ‡∏≠‡πà‡∏≤‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏≠‡∏ö‡∏ô‡∏∞‡∏Ñ‡∏∞! ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 20 ‡∏Ç‡πâ‡∏≠ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏¢ ‡∏Ñ‡∏£‡∏π‡πÄ‡∏≠‡∏≤‡πÉ‡∏à‡∏ä‡πà‡∏ß‡∏¢!</p>
      </div>

      <!-- Progress Bar -->
      <div class="w-full mt-6">
        <div class="flex justify-between text-xs text-gray-500 mb-1">
          <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span>
          <span id="progress-text">‡∏Ç‡πâ‡∏≠ 1 / 20</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
          <div id="progress-bar" class="bg-blue-500 h-3 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏Ç‡∏ß‡∏≤: ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö -->
  <div class="w-full md:w-2/3">

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö (Intro) -->
    <div id="quiz-intro" class="bg-white rounded-2xl shadow-lg p-8 border border-gray-200 text-center">
      <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>
      </div>
      <h2 class="text-2xl font-bold text-gray-800 mb-2">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≠‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?</h2>
      <p class="text-gray-600 mb-8">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 20 ‡∏Ç‡πâ‡∏≠ ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà Flowchart, ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£, ‡πÑ‡∏õ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á if-else</p>
      <button onclick="startQuiz()" class="bg-blue-600 text-white font-bold py-3 px-10 rounded-full hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1 text-lg">
        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö
      </button>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° (Quiz Container) -->
    <div id="quiz-container" class="hidden bg-white rounded-2xl shadow-lg p-8 border border-gray-200 min-h-[400px] relative">
      <!-- ‡πÄ‡∏•‡∏Ç‡∏Ç‡πâ‡∏≠ -->
      <span class="absolute top-4 right-4 bg-gray-100 text-gray-500 text-xs font-bold px-2 py-1 rounded">SCORE: <span id="current-score">0</span></span>

      <h3 id="question-text" class="text-xl md:text-2xl font-bold text-gray-800 mb-8 leading-relaxed fade-in">
        ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...
      </h3>

      <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö -->
      <div id="options-container" class="space-y-3">
        <!-- Options will be injected here via JS -->
      </div>
    </div>

    <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏™‡∏£‡∏π‡∏õ‡∏ú‡∏• (Result) -->
    <div id="quiz-result" class="hidden bg-white rounded-2xl shadow-lg p-8 border border-gray-200 text-center fade-in">
      <div id="result-icon" class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
        <!-- Icon changes dynamically -->
      </div>
      <h2 class="text-3xl font-bold text-gray-800 mb-2">‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!</h2>
      <p class="text-gray-600 mb-6">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠</p>

      <div class="text-6xl font-black text-blue-600 mb-2" id="final-score">0</div>
      <p class="text-gray-400 text-sm mb-8">‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ï‡πá‡∏° 20 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
      <p id="save-status" class="text-sm text-gray-500 mb-4">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô...</p>

      <div class="flex justify-center gap-4">
        <button onclick="location.reload()" class="bg-gray-100 text-gray-700 font-bold py-2 px-6 rounded-lg hover:bg-gray-200 transition-colors">
          ‡∏ó‡∏≥‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        </button>
        <a href="index.html" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors shadow-md">
          ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
        </a>
      </div>
    </div>

  </div>
</main>

<script>
  // --- ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç! ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á Google Apps Script ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì Deploy ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ---
  const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwoTjgil0LTrAdLVZNrPRyNFzbBSPmYiVRmIHwN6ZPF0dG7caGAlo3UBCfiORntPKm8/exec";

  // --- ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° (20 ‡∏Ç‡πâ‡∏≠) ---
  const questions = [
    {
      q: "‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÉ‡∏î‡πÉ‡∏ô‡∏ú‡∏±‡∏á‡∏á‡∏≤‡∏ô (Flowchart) ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Start) ‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (End) ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô?",
      options: ["‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏ú‡∏∑‡∏ô‡∏ú‡πâ‡∏≤ (Process)", "‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏•‡∏≤‡∏°‡∏ï‡∏±‡∏î (Decision)", "‡∏ß‡∏á‡∏£‡∏µ (Terminator)", "‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ô‡∏≤‡∏ô (Input/Output)"],
      correct: 2
    },
    {
      q: "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏≠‡∏±‡∏•‡∏Å‡∏≠‡∏£‡∏¥‡∏ó‡∏∂‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏î ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏©‡∏≤‡∏û‡∏π‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô?",
      options: ["‡∏£‡∏´‡∏±‡∏™‡∏à‡∏≥‡∏•‡∏≠‡∏á (Pseudocode)", "‡∏ú‡∏±‡∏á‡∏á‡∏≤‡∏ô (Flowchart)", "‡∏†‡∏≤‡∏©‡∏≤‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ (Natural Language)", "‡∏†‡∏≤‡∏©‡∏≤‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå (Programming Language)"],
      correct: 2
    },
    {
      q: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î **‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà** ‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤ Python?",
      options: ["‡∏´‡πâ‡∏≤‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç", "‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏µ‡∏î‡∏•‡πà‡∏≤‡∏á (_)", "‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà‡∏ñ‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô", "‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏á‡∏ß‡∏ô (Reserved Words)"],
      correct: 2
    },
    {
      q: "‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• '‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢' ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° (‡πÄ‡∏ä‡πà‡∏ô 3.75) ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏ô‡∏¥‡∏î‡πÉ‡∏î?",
      options: ["int", "float", "string", "bool"],
      correct: 1
    },
    {
      q: "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏î‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤ Python ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå** ‡∏≠‡∏≠‡∏Å‡∏ó‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠?",
      options: ["input()", "print()", "scan()", "output()"],
      correct: 1
    },
    {
      q: "‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ç‡∏≠‡∏á `10 // 3` ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤ Python ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?",
      options: ["3.33", "3", "1", "4"],
      correct: 1
    },
    {
      q: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ `%` (Modulo) ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤ Python ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏∞‡πÑ‡∏£?",
      options: ["‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞", "‡∏´‡∏≤‡∏£‡πÄ‡∏≠‡∏≤‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå", "‡∏´‡∏≤‡∏£‡πÄ‡∏≠‡∏≤‡πÄ‡∏®‡∏©", "‡∏¢‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á"],
      correct: 2
    },
    {
      q: "‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (Escape Sequence) ‡∏ï‡∏±‡∏ß‡πÉ‡∏î ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà**?",
      options: ["\\t", "\\n", "\\r", "\\b"],
      correct: 1
    },
    {
      q: "‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô **‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏° (Integer)** ‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏≠‡∏∞‡πÑ‡∏£?",
      options: ["%s", "%f", "%d", "%c"],
      correct: 2
    },
    {
      q: "‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `input()` ‡∏à‡∏∞‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏ô‡∏¥‡∏î‡πÉ‡∏î‡πÄ‡∏™‡∏°‡∏≠ (‡πÇ‡∏î‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô)?",
      options: ["Integer (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°)", "Float (‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°)", "String (‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°)", "Boolean (‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á)"],
      correct: 2
    },
    {
      q: "‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÉ‡∏î‡πÉ‡∏ô Flowchart ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Decision)**?",
      options: ["‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏ú‡∏∑‡∏ô‡∏ú‡πâ‡∏≤", "‡∏ß‡∏á‡∏Å‡∏•‡∏°", "‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏•‡∏≤‡∏°‡∏ï‡∏±‡∏î", "‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ô‡∏≤‡∏ô"],
      correct: 2
    },
    {
      q: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡∏Ñ‡∏∑‡∏≠‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö **Single Selection**?",
      options: ["if", "if-else", "if-elif-else", "for loop"],
      correct: 0
    },
    {
      q: "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á `if-else` ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÉ‡∏î‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?",
      options: ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡∏ó‡∏≥/‡πÑ‡∏°‡πà‡∏ó‡∏≥)", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏°‡∏µ 2 ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô", "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 3 ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å", "‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏£‡∏≠‡∏ö"],
      correct: 1
    },
    {
      q: "‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏ï‡∏±‡∏ß‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÉ‡∏ô Python ‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á **‡∏¢‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á**?",
      options: ["^", "*", "**", "exp"],
      correct: 2
    },
    {
      q: "‡∏´‡∏≤‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î `x = 5` ‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏°‡∏≤ `x = x + 2` ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á x ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?",
      options: ["5", "2", "7", "Error"],
      correct: 2
    },
    {
      q: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 50' ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á?",
      options: ["score > 50", "score => 50", "score >= 50", "score = > 50"],
      correct: 2
    },
    {
      q: "‡πÉ‡∏ô Python ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ `:` (Colon) ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á `if`?",
      options: ["‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ if", "‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç", "‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á print", "‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏¢"],
      correct: 1
    },
    {
      q: "‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (Indentation) ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤ Python ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
      options: ["‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô", "‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á (Block)", "‡πÉ‡∏ä‡πâ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏î Enter", "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡πÄ‡∏•‡∏≠‡∏£‡πå‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏á"],
      correct: 1
    },
    {
      q: "‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç ‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡∏±‡∏î‡πÄ‡∏Å‡∏£‡∏î A, B, C, D, F ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏î?",
      options: ["if ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏Ñ‡∏£‡∏±‡πâ‡∏á", "if-else", "if-elif-else", "input-print"],
      correct: 2
    },
    {
      q: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î **‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà** ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ú‡∏±‡∏á‡∏á‡∏≤‡∏ô (Flowchart)?",
      options: ["‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö", "‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢", "‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏ï‡∏£‡∏£‡∏Å‡∏∞", "‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô"],
      correct: 3
    }
  ];

  // --- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏£‡∏∞‡∏ö‡∏ö ---
  let currentQIndex = 0;
  let score = 0;
  let userData = null;

  // --- Elements ---
  const teacherMsg = document.getElementById('teacher-msg');
  const progressBar = document.getElementById('progress-bar');
  const progressText = document.getElementById('progress-text');
  const quizIntro = document.getElementById('quiz-intro');
  const quizContainer = document.getElementById('quiz-container');
  const quizResult = document.getElementById('quiz-result');
  const questionText = document.getElementById('question-text');
  const optionsContainer = document.getElementById('options-container');
  const currentScoreDisplay = document.getElementById('current-score');
  const finalScoreDisplay = document.getElementById('final-score');
  const resultIcon = document.getElementById('result-icon');
  const saveStatus = document.getElementById('save-status');

  // --- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ---
  window.onload = function() {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
    const storedUser = localStorage.getItem('python_student');
    if (!storedUser) {
      alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö");
      window.location.href = "index.html";
      return;
    }
    userData = JSON.parse(storedUser);
    teacherMsg.textContent = `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ${userData.name.split(' ')[0]}! ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏ó‡∏≥‡∏ô‡∏∞`;
  };

  function startQuiz() {
    quizIntro.classList.add('hidden');
    quizContainer.classList.remove('hidden');
    loadQuestion();
    updateTeacher("start");
  }

  function loadQuestion() {
    const q = questions[currentQIndex];
    questionText.innerHTML = `${currentQIndex + 1}. ${q.q}`;
    progressText.textContent = `‡∏Ç‡πâ‡∏≠ ${currentQIndex + 1} / ${questions.length}`;
    progressBar.style.width = `${((currentQIndex) / questions.length) * 100}%`;

    optionsContainer.innerHTML = '';
    q.options.forEach((opt, index) => {
      const btn = document.createElement('button');
      btn.className = "option-btn w-full text-left p-4 rounded-xl border-2 border-gray-200 hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 flex items-center group";
      btn.onclick = () => checkAnswer(index);

      btn.innerHTML = `
                    <span class="w-8 h-8 rounded-full bg-gray-100 text-gray-500 font-bold flex items-center justify-center mr-4 group-hover:bg-blue-500 group-hover:text-white transition-colors">${['‡∏Å','‡∏Ç','‡∏Ñ','‡∏á'][index]}</span>
                    <span class="text-gray-700 font-medium text-lg">${opt}</span>
                `;
      optionsContainer.appendChild(btn);
    });

    questionText.classList.remove('fade-in');
    void questionText.offsetWidth; // Trigger reflow
    questionText.classList.add('fade-in');
  }

  function checkAnswer(selectedIndex) {
    const correctIndex = questions[currentQIndex].correct;
    const buttons = optionsContainer.getElementsByTagName('button');

    // ‡∏•‡πá‡∏≠‡∏Ñ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    for(let btn of buttons) {
      btn.disabled = true;
      btn.classList.add('cursor-not-allowed', 'opacity-70');
    }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
    if (selectedIndex === correctIndex) {
      score++;
      buttons[selectedIndex].classList.replace('border-gray-200', 'border-green-500');
      buttons[selectedIndex].classList.replace('bg-white', 'bg-green-50');
      buttons[selectedIndex].querySelector('span:first-child').className = "w-8 h-8 rounded-full bg-green-500 text-white font-bold flex items-center justify-center mr-4";
      updateTeacher("correct");
    } else {
      buttons[selectedIndex].classList.replace('border-gray-200', 'border-red-500');
      buttons[selectedIndex].classList.replace('bg-white', 'bg-red-50');
      buttons[selectedIndex].querySelector('span:first-child').className = "w-8 h-8 rounded-full bg-red-500 text-white font-bold flex items-center justify-center mr-4";

      // ‡πÄ‡∏â‡∏•‡∏¢‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å
      buttons[correctIndex].classList.replace('border-gray-200', 'border-green-500');
      buttons[correctIndex].classList.add('bg-green-50');
      updateTeacher("wrong");
    }

    currentScoreDisplay.textContent = score;

    // ‡∏£‡∏≠ 1.2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    setTimeout(() => {
      currentQIndex++;
      if (currentQIndex < questions.length) {
        loadQuestion();
      } else {
        showResult();
      }
    }, 1200);
  }

  function showResult() {
    quizContainer.classList.add('hidden');
    quizResult.classList.remove('hidden');
    finalScoreDisplay.textContent = score;
    progressBar.style.width = '100%';

    let grade = "";
    let iconHtml = "";

    if (score >= 16) {
      grade = "‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! (Grade A)";
      iconHtml = `<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`;
      updateTeacher("finish_high");
    } else if (score >= 10) {
      grade = "‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Ñ‡∏£‡∏±‡∏ö (Pass)";
      iconHtml = `<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`;
      updateTeacher("finish_mid");
    } else {
      grade = "‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö (Try Again)";
      iconHtml = `<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>`;
      updateTeacher("finish_low");
    }

    resultIcon.innerHTML = iconHtml;
    resultIcon.className = `w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 ${score >= 16 ? 'bg-green-100' : score >= 10 ? 'bg-yellow-100' : 'bg-red-100'}`;

    // --- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ---
    saveScore(score);
  }

  function updateTeacher(state) {
    const msgs = {
      "start": ["‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏ó‡∏≥‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏≠‡πà‡∏≤‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏î‡∏µ‡πÜ", "‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏∏‡∏¢‡πÄ‡∏•‡∏¢!", "20 ‡∏Ç‡πâ‡∏≠ ‡πÑ‡∏°‡πà‡∏¢‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô"],
      "correct": ["‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö", "‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö!", "‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏•‡∏¢", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡∏î‡∏µ‡∏°‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö"],
      "wrong": ["‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏≠‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞", "‡∏≠‡πã‡∏≠... ‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡∏ï‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ô‡∏µ‡πà‡πÄ‡∏≠‡∏á ‡∏à‡∏≥‡πÑ‡∏ß‡πâ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö", "‡∏ú‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏π‡∏Ñ‡∏£‡∏±‡∏ö ‡∏™‡∏π‡πâ‡∏ï‡πà‡∏≠!", "‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏ä‡πá‡∏Å‡∏î‡∏µ‡πÜ ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö"],
      "finish_high": "‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏à‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å ‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á‡πÅ‡∏•‡πâ‡∏ß!",
      "finish_mid": "‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÅ‡∏•‡πâ‡∏ß ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡∏à‡∏∞‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô",
      "finish_low": "‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà ‡∏Ñ‡∏£‡∏π‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô!"
    };

    let msgArray = Array.isArray(msgs[state]) ? msgs[state] : [msgs[state]];
    if (state.startsWith("finish")) {
      teacherMsg.innerText = msgs[state];
    } else {
      const randomMsg = msgArray[Math.floor(Math.random() * msgArray.length)];
      teacherMsg.innerText = randomMsg;
    }
  }

  // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏õ Google Sheets ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å LocalStorage ---
  function saveScore(finalScore) {
    // 1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï LocalStorage (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ index.html ‡∏£‡∏π‡πâ)
    if (userData) {
      userData.finalScore = finalScore;
      localStorage.setItem('python_student', JSON.stringify(userData));
      console.log("Saved to LocalStorage:", userData);
    }

    // 2. ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ Google Sheets
    const payload = {
      type: 'score', // ‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô"
      name: userData.name,
      class: userData.class,
      no: userData.no,
      score: finalScore,
      timestamp: new Date().toLocaleString('th-TH')
    };

    fetch(GOOGLE_SCRIPT_URL, {
      method: 'POST',
      body: JSON.stringify(payload),
      mode: 'no-cors', // ‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ CORS
      headers: { 'Content-Type': 'application/json' }
    }).then(() => {
      saveStatus.textContent = "‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!";
      saveStatus.classList.add("text-green-600");
      saveStatus.classList.remove("text-gray-500");
    }).catch(err => {
      console.error("Save Error:", err);
      saveStatus.textContent = "‚ö†Ô∏è ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÅ‡∏ï‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß)";
      saveStatus.classList.add("text-yellow-600");
    });
  }

</script>
</body>
</html>
